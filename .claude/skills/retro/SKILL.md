---
name: retro
description: エージェントの振り返りを実行し、スキル化候補・サブエージェント増設提案・コンテキスト肥大化チェックをレポートする
user-invocable: true
argument-hint: "(引数なし)"
allowed-tools: Read, Grep, Glob
---

# 振り返り・効率化スキル

エージェントのメモリを分析し、効率化のための提案を行う。

## 処理フロー

### 1. エージェントメモリ分析

- `.claude/agent-memory/*/MEMORY.md` を全て読み込み
- 各ファイルの行数をチェック（200行超 → コンテキスト肥大化警告）
- 「Repeated Patterns」セクションから繰り返しパターンを集約

### 2. スキル化候補の検出

- 繰り返しパターンを分析し、スキル化で自動化できるものを提案
- 既存スキル（`.claude/skills/*/SKILL.md`）と重複しないか確認

### 3. サブエージェント増設の判断

- 「Pain Points」セクションから、既存エージェントではカバーできない領域を検出
- 新エージェント作成の提案（役割・ツール・スコープ）

### 4. コンテキスト肥大化チェック

- MEMORY.mdの行数 > 200行: 整理推奨
- 同じ知見が複数エージェントに重複: 共有ルール化を提案

### 5. レポート出力

## 出力フォーマット

```markdown
## 振り返りレポート

### コンテキスト状況
| エージェント | MEMORY.md行数 | ステータス |
|-------------|--------------|-----------|
| kotlin-dev  | 45行         | 正常      |
| ios-dev     | 210行        | 要整理    |

### スキル化候補
- [ ] (パターン名)（(エージェント名)で(N)回以上実施）

### サブエージェント増設提案
- (提案またはなし)

### ルール追加提案
- [ ] (提案)
```

## エージェントメモリ規約

各エージェントのMEMORY.mdに以下のセクションを維持する:

- **Repeated Patterns**: 繰り返し行った作業パターン
- **Pain Points**: 既存の仕組みでは解決しにくかった課題
- **Lessons Learned**: 学んだ知見・ベストプラクティス
