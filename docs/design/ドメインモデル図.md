
# Domain Modelï¼ˆã‚¢ã‚¤ãƒ‡ã‚¢å…±æœ‰ã‚¢ãƒ—ãƒªï¼‰  

---

# ğŸ”´ Aggregate: Postï¼ˆæŠ•ç¨¿ï¼‰

## Entity: Node
- aggregate: Post
- phase: 1
- description: èª²é¡Œ/ã‚¢ã‚¤ãƒ‡ã‚¢ã®æŠ•ç¨¿ãƒãƒ¼ãƒ‰ã€‚ã‚¢ãƒ—ãƒªå…¨ä½“ã®ä¸­å¿ƒã€‚

- fields:
  - id: string
  - type: NodeType(enum)  // "issue" | "idea"
  - title: string
  - content: string
  - authorId: string  // User.id
  - parentNodeId: string?  // æ´¾ç”Ÿå…ƒ
  - tagIds: List\<TagId\>  // Tag ã®ç´ã¥ã‘ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³å´ã¯IDãƒªã‚¹ãƒˆã§æ‰±ã†ï¼‰
  - createdAt: datetime

- relations:
  - 1:N Comment via Comment.nodeId
  - 1:N Reaction via Reaction.nodeId
  - 0:N Node parent via Node.parentNodeId
  - 0:N Node children via Node.parentNodeId
  - N:N Tag (â€»æ°¸ç¶šåŒ–ã§ã¯ node_tags ãƒ†ãƒ¼ãƒ–ãƒ«)

---

## Entity: Comment
- aggregate: Post
- phase: 1
- description: ãƒãƒ¼ãƒ‰ã«ç´ã¥ãã‚³ãƒ¡ãƒ³ãƒˆã€‚

- fields:
  - id: string
  - nodeId: string
  - authorId: string
  - content: string
  - createdAt: datetime

- relations:
  - N:1 Node via Comment.nodeId
  - N:1 User via Comment.authorId

---

## Entity: Reaction
- aggregate: Post
- phase: 1
- description: ãƒãƒ¼ãƒ‰ã«å¯¾ã™ã‚‹å„ãƒ¦ãƒ¼ã‚¶ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆã„ã„ã­ãƒ»å…±æ„Ÿãƒ»æ°—ã«ãªã‚‹ãƒ»ä½œã£ã¦ã¿ãŸã„ï¼‰ã€‚â€»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä»¶æ•°ãŒå¢—ãˆãŸå ´åˆã«è¦æ¤œè¨

- fields:
  - id: string
  - nodeId: string
  - userId: string
  - type: ReactionType(enum)  // "like", "insight", "curious", "dev_interest"
  - createdAt: datetime

- relations:
  - N:1 Node via Reaction.nodeId
  - N:1 User via Reaction.userId

---

---

# ğŸŸ¦ Aggregate: UserProfileï¼ˆãƒ¦ãƒ¼ã‚¶ï¼‰

## Entity: User
- aggregate: UserProfile
- phase: 1
- description: æŠ•ç¨¿ã‚„ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸»ä½“ã¨ãªã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€‚

- fields:
  - id: string
  - handle: string
  - roleTag: string?  // "Backend" "Frontend" ãªã© Phase2ã€œ
  - createdAt: datetime

- relations:
  - 1:N Node via Node.authorId
  - 1:N Comment via Comment.authorId
  - 1:N Reaction via Reaction.userId

---

# ğŸŸ¨ Aggregate: Taggingï¼ˆã‚¿ã‚°ç®¡ç†ï¼‰

## Entity: Tag
- aggregate: Tagging
- phase: 2
- description: ãƒ†ãƒ¼ãƒãƒ»æŠ€è¡“ãªã©ã®åˆ†é¡ç”¨ã‚¿ã‚°ï¼ˆãƒã‚¹ã‚¿ï¼‰ã€‚

- fields:
  - id: string
  - label: string
  - isActive: boolean
  - createdAt: datetime

- relations:
  - N:N Nodeï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ä¸Šã¯ Node.tagIdsã€æ°¸ç¶šåŒ–ã§ã¯ node_tagsï¼‰

---

# âš™ ã€DBè¨­è¨ˆæ™‚ã®æ³¨æ„ã€‘Persistenceï¼ˆæ°¸ç¶šåŒ–ãƒ¢ãƒ‡ãƒ«ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ã¯åˆ¥ã«å®šç¾©ï¼‰

## Table: tags
- id (PK)
- label
- is_active
- created_at

## Table: node_tagsï¼ˆä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
- node_id (FK -> nodes.id)
- tag_id (FK -> tags.id)
- (PK: node_id + tag_id)

â€» ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã¯ NodeTag ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç™»å ´ã•ã›ãšã€  
ã€€Node.aggregate å†…ã® `tagIds: List<TagId>` ã§æ‰±ã†ã€‚

---

# ğŸŸ© Aggregate: AdminContentï¼ˆé‹å–¶ï¼‰

## Entity: AdminNotice
- aggregate: AdminContent
- phase: 2
- description: é‹å–¶ã‹ã‚‰ã®å›ºå®šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‚

- fields:
  - id
  - title
  - content
  - updatedAt

- relations:
  - ãªã—ï¼ˆç‹¬ç«‹ãƒ¬ã‚³ãƒ¼ãƒ‰ï¼‰

---

# ğŸŸª Aggregate: Notificationï¼ˆé€šçŸ¥ï¼‰

## Entity: Notification
- aggregate: Notification
- phase: 2
- description: ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ»æ´¾ç”Ÿä½œæˆãªã©ã®é€šçŸ¥ã€‚

- fields:
  - id
  - userId
  - type  // "reaction", "comment", "derivative"
  - nodeId
  - createdAt
  - isRead

- relations:
  - N:1 User via Notification.userId
  - N:1 Node via Notification.nodeId

---

# ğŸŸ§ View Modelsï¼ˆæ°¸ç¶šåŒ–ã—ãªã„æç”»å°‚ç”¨ï¼‰

## ViewModel: MapNode
- phase: 1
- fields:
  - nodeId
  - x, y
  - likeCount
  - insightCount
  - curiousCount
  - devInterestCount
  - commentCount

## ViewModel: MapEdge
- phase: 1
- fields:
  - fromNodeId
  - toNodeId
